#
#	$NetBSD$
#
#	GENERIC ARM (aarch64) kernel
#

include	"arch/evbarm/conf/std.evbarm64"

# XXXNH std.generic64 instead???
include "arch/evbarm/conf/files.generic64"
include	"arch/evbarm/conf/GENERIC.common"

#
# FDT files supported by this kernel - add to DTSSUBDIR and DTS as
# appropriate
#
makeoptions	DTSGNUARCH="arm64"
makeoptions	DTSSUBDIR="nvidia"
makeoptions	DTS="
	tegra210-p2371-0000.dts
	tegra210-p2371-2180.dts
	tegra210-p2571.dts
	tegra210-smaug.dts
"
#options 	CPU_CORTEXA53
options 	CPU_CORTEXA57
options 	SOC_TEGRA210
options 	SOC_SUN50I_A64
options 	SOC_SUN50I_H5
#options 	MULTIPROCESSOR

pseudo-device 	openfirm	# /dev/openfirm

options 	DIAGNOSTIC	# internal consistency checks
options 	DEBUG
#options 	LOCKDEBUG
#options 	PMAP_DEBUG	# Enable pmap_debug_level code
#options 	IPKDB		# remote kernel debugging
options 	VERBOSE_INIT_ARM # verbose bootstrapping messages
# CONSADDR is required for early init messages from VERBOSE_INIT_ARM.
options 	CONSADDR=0x70006000

makeoptions	DEBUG="-g"	# compile full symbol table
makeoptions	COPY_SYMTAB=1

config		netbsd		root on ? type ?

# Device tree support
armfdt0		at root
fdt*		at fdtbus?

# CPUs
cpus*		at fdt? pass 0
cpu*		at cpus?

# CPU frequency scaling
cpufreqdt*	at cpu?

# Power State Coordination Interface (PSCI)
psci*		at fdt?

fclock*		at fdt? pass 1
ffclock*	at fdt? pass 1
fregulator*	at fdt? pass 4
gregulator*	at fdt? pass 4
gpiokeys*	at fdt?
wskbd*		at gpiokeys? console ? mux 1
gpioleds*	at fdt?

# Timer
gtmr*		at fdt? pass 1		# ARM Generic Timer
armgtmr0	at gtmr?
tegratimer*	at fdt?			# Timers

# Watchdog
sunxiwdt*	at fdt?			# Allwinner watchdog

# Interrupt controller
tegralic*	at fdt? pass 1		# LIC
gic*		at fdt? pass 1		# GIC
armgic0		at gic?

# Memory controller
tegramc*	at fdt?	pass 4		# MC

# DMA controller
sun6idma*	at fdt?			# Allwinner DMA controller (sun6i)
tegraapbdma*	at fdt? pass 4		# APB DMA

# FUSE controller
tegrafuse*	at fdt? pass 4		# FUSE

# Power management controller
tegrapmc*	at fdt? pass 4		# PMC

# Clock and Reset controller
sun8ih3ccu*	at fdt? pass 2		# Allwinner H3/H5 CCU
sun8ih3rccu*	at fdt? pass 2		# Allwinner H3/H5 CCU (PRCM)
sun50ia64ccu*	at fdt? pass 2		# Allwinner A64 CCU
sunxiresets*	at fdt? pass 1		# Allwinner misc. resets
sunxigates*	at fdt? pass 1		# Allwinner misc. gates
sunxigmacclk*	at fdt? pass 2		# Allwinner GMAC MII/RGMII clock mux
tegra210car*	at fdt? pass 3		# CAR (T210)

# GPIO controller
sunxigpio*	at fdt? pass 3		# Allwinner GPIO
tegragpio*	at fdt? pass 2		# Tegra GPIO
gpio*		at gpiobus?

# MPIO / Pinmux
tegrapinmux*	at fdt?			# MPIO

# XUSB PADCTL
tegra210xpad*	at fdt?			# XUSB PADCTL (T210)
tegra210xphy*	at tegra210xpad?

# PCIE
# XXXNH not yet
#tegrapcie0	at fdt?			# PCIE
#pci*		at tegrapcie0
#ppb*		at pci? dev ? function ?
#pci*		at ppb?

# Ethernet
sunxiemac*	at fdt?				# Allwinner Gigabit Ethernet (EMAC)
#re*		at pci? dev ? function ?	# Realtek RTL8111GS
rgephy*		at mii? phy ?
rlphy*		at mii? phy ?
ukphy*		at mii? phy ?

# Mini-PCIe Wireless
#options 	ATHHAL_AR5212,ATHHAL_RF2425	# AR5BHB63
#ath*		at pci? dev ? function ?	# Atheros IEEE 802.11
#athn*		at pci? dev ? function ?	# Atheros IEEE 802.11

# UART
com*		at fdt?			# UART
options 	CONSADDR=0x01c28000

# I2C
sunxitwi*	at fdt?			# Allwinner TWI
sunxirsb*	at fdt?			# Allwinner RSB
tegrai2c*	at fdt? pass 4		# Tegra I2C
iic*		at tegrai2c?
titemp*		at iic?
seeprom*	at iic?
as3722pmic*	at iic?
as3722reg*	at as3722pmic?
max77620pmic*	at iic?
tcagpio*	at iic?

# RTC
sunxirtc*	at fdt?			# Allwinner RTC
tegrartc*	at fdt?			# Tegra RTC

# SDMMC
mmcpwrseq*	at fdt?			# Simple MMC power sequence provider
sdhc*		at fdt?			# SD Host Controller Interface
sunximmc*	at fdt?			# Allwinner SD/MMC
sdmmc*		at sdmmcbus?
ld0		at sdmmc0
ld1		at sdmmc1
ld2		at sdmmc2
ld3		at sdmmc3
ld*		at sdmmc?

# SATA
ahcisata*	at fdt?			# SATA
atabus*		at ata?
atapibus*	at atapi?
wd*		at atabus? drive ?
cd*		at atapibus? drive ?

# Audio support
hdaudio*	at fdt?			# HDA
hdafg*		at hdaudiobus?
options 	HDAUDIOVERBOSE
options 	HDAUDIO_32BIT_ACCESS
options 	HDAUDIO_ENABLE_HDMI
options 	HDAUDIO_ENABLE_DISPLAYPORT
sunxicodec*	at fdt?			# Allwinner audio codec
h3codec*	at fdt?			# Allwinner H3 audio codec (analog part)
audio*		at audiobus?

spkr*		at audio?		# PC speaker (synthesized)

# HDMI CEC
tegracec0	at fdt?			# HDMI CEC
hdmicec*	at hdmicecbus?

# Display
#tegradrm*	at fdt?			# Display
#tegrafb*	at tegrafbbus?
genfb*		at fdt?			# Simple Framebuffer
wsdisplay*	at wsemuldisplaydev?
options 	VCONS_DRAW_INTR
options 	WSEMUL_VT100
options 	WS_DEFAULT_FG=WSCOL_WHITE
options 	WS_DEFAULT_BG=WSCOL_BLACK
options 	WS_KERNEL_FG=WSCOL_GREEN
options 	WS_KERNEL_BG=WSCOL_BLACK
options 	WSDISPLAY_COMPAT_PCVT
options 	WSDISPLAY_COMPAT_SYSCONS
options 	WSDISPLAY_COMPAT_USL
options 	WSDISPLAY_COMPAT_RAWKBD
options 	WSDISPLAY_DEFAULTSCREENS=4
pseudo-device	wsmux
pseudo-device	wsfont

# GPU
#nouveau*	at fdt?			# GPU

# Thermal throttling controller
tegrasoctherm*	at fdt?			# SOC_THERM

# USB XHCI
xhci*		at fdt?			# XUSB
usb*		at xhci?

# USB 2.0
sunxiusbphy*	at fdt? pass 9		# Allwinner USB PHY
tegrausbphy*	at fdt?			# Tegra USB PHY
ehci*		at fdt?			# EHCI
ohci*		at fdt?			# OHCI
motg*		at fdt?			# Mentor Graphics USB OTG
usb*		at ehci?
usb*		at ohci?
usb*		at motg?

include "dev/usb/usbdevices.config"
midi*		at midibus?

cinclude "arch/evbarm/conf/TEGRA.local"
